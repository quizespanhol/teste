<!DOCTYPE html>
<html>
<head>
  <base target="_top">
  <style>
    body { font-family: 'Segoe UI', Roboto, sans-serif; background: #f0f2f5; margin: 0; padding: 20px; font-size: 20px; }
    .quiz-container { max-width: 700px; margin: auto; background: #fff; padding: 30px; border-radius: 12px; box-shadow: 0 0 10px rgba(0,0,0,0.1); position: relative; }
    .question { font-size: 2.2em; margin-bottom: 20px; } 
    .options button { display: block; width: 100%; text-align: left; background: #e0e0e0; border: none; margin: 10px 0; padding: 16px; border-radius: 8px; font-size: 1.2em; cursor: pointer; transition: background 0.3s; }
    .options button.correct { background: #4CAF50 !important; color: white; }
    .options button.incorrect { background: #F44336 !important; color: white; }
    .options button:disabled { opacity: 0.7; cursor: not-allowed; }
    .next-btn { margin-top: 15px; padding: 12px 24px; border: none; border-radius: 8px; background: #2196F3; color: white; cursor: pointer; font-size: 1.1em; }
    #timer { font-size: 1.5em; font-weight: bold; color: #d9534f; margin-bottom: 15px; text-align: right; }
    .loading-overlay {
      position: absolute;
      top:0; left:0; width:100%; height:100%;
      background: rgba(255,255,255,0.9);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 2em;
      color: #333;
      border-radius: 12px;
      z-index: 1000;
      display: none;
    }
    .action-btn {
      padding: 14px 30px;
      border: none;
      border-radius: 50px;
      background: #FF5722;
      color: white;
      font-size: 1.3em;
      font-weight: bold;
      cursor: pointer;
      box-shadow: 0 4px 8px rgba(0,0,0,0.2);
      transition: transform 0.2s, background 0.2s;
    }
    .action-btn:hover {
      transform: scale(1.05);
      background: #e64a19;
    }
    .action-btn.secondary {
      background: #4CAF50;
    }
    .action-btn.secondary:hover {
      background: #388e3c;
    }
    .result-banner {
      text-align: center;
      padding: 30px;
      background: #eef9ff;
      border-radius: 16px;
      margin: 20px 0;
    }
    .nota-final {
      font-size: 4em;
      font-weight: bold;
      color: #2196F3;
      margin: 20px 0;
    }
    #participantName { 
      width: 100%; 
      padding: 12px; 
      margin-bottom: 20px; 
      font-size: 1.1em; 
      border-radius: 8px; 
      border: 1px solid #ccc; 
    }
    @keyframes fall {
      0% { top: 40px; opacity: 1; }
      100% { top: 80px; opacity: 0; }
    }
    .dica {
      font-size: 0.9em;
      color: #666;
      margin-top: 5px;
      font-style: italic;
    }
  </style>
  
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
</head>
<body>
  <div class="quiz-container">
    <div id="quiz"></div>
    <div id="loading" class="loading-overlay">Carregando pr√≥xima quest√£o...</div>
  </div>

  <script>
    // Links (voc√™ pode alterar conforme necess√°rio)
    const shopeeLink = "https://s.shopee.com.br/70DpcjasH2";
    const resultadosLink = "https://s.shopee.com.br/70DpcjasH2"; // Link para onde o bot√£o VER RESULTADOS vai redirecionar

    // ===== 10 PERGUNTAS SOBRE ESPANHOL PARA BRASILEIROS =====
    // Foco em falsos cognatos e gram√°tica b√°sica
    const questions = [
      {
        question: "Em espanhol, 'embarazada' significa:",
        options: ["Com vergonha", "Gr√°vida", "Atrapalhada", "Embara√ßada"],
        answer: 2,
        dica: "üáßüá∑ 'Embara√ßada' em portugu√™s √© 'avergonzada' em espanhol."
      },
      {
        question: "Qual √© o significado de 'coger' na maioria dos pa√≠ses hisp√¢nicos?",
        options: ["Pegar", "Co√ßar", "Um sentido vulgar (pegar sexualmente)", "Cozinhar"],
        answer: 3,
        dica: "‚ö†Ô∏è Falso cognato perigoso! Em portugu√™s 'pegar', em espanhol √© um verbo com conota√ß√£o sexual."
      },
      {
        question: "'Exito' em espanhol quer dizer:",
        options: ["Sa√≠da", "√äxito (sucesso)", "Exit", "Exerc√≠cio"],
        answer: 2,
        dica: "‚úÖ '√äxito' em portugu√™s √© '√©xito' em espanhol, mas cuidado com 'salida' (sa√≠da)."
      },
      {
        question: "Como se diz 'escrit√≥rio' em espanhol?",
        options: ["Escritorio", "Oficina", "Despacho", "Negocio"],
        answer: 2,
        dica: "‚ö†Ô∏è 'Escritorio' em espanhol √© a mesa de trabalho. 'Oficina' √© o local de trabalho."
      },
      {
        question: "'Constipa√ß√£o' em espanhol significa:",
        options: ["Constipa√ß√£o (intestino preso)", "Resfriado", "Pris√£o de ventre", "Constipa√ß√£o nasal"],
        answer: 2,
        dica: "ü§ß 'Estar constipado' √© estar resfriado. Para intestino, use 'estre√±imiento'."
      },
      {
        question: "Qual a tradu√ß√£o correta de 'borracha' para o espanhol?",
        options: ["Boracha", "Goma", "Caucho", "Borracha (igual)"],
        answer: 2,
        dica: "üìù 'Boracha' n√£o existe. 'Goma' √© usado para borracha escolar e tamb√©m chiclete."
      },
      {
        question: "'Pelado' em espanhol pode significar:",
        options: ["Pelado (sem roupa)", "Careca", "Descascado", "Pobre / sem dinheiro"],
        answer: 4,
        dica: "üí∞ Na g√≠ria, 'estar pelado' √© estar sem dinheiro. 'Calvo' √© careca."
      },
      {
        question: "Como se fala 'brincadeira' em espanhol?",
        options: ["Brincadeira", "Broma", "Juego", "Diversi√≥n"],
        answer: 2,
        dica: "üé≠ 'Broma' √© brincadeira no sentido de piada. 'Juego' √© jogo."
      },
      {
        question: "'Rato' em espanhol significa:",
        options: ["Rato (animal)", "Momento / instante", "Rato de computador", "Ratazana"],
        answer: 2,
        dica: "‚è±Ô∏è 'Un rato' √© um momento. O animal √© 'rat√≥n'."
      },
      {
        question: "Qual frase est√° gramaticalmente correta em espanhol?",
        options: ["Me llamo es Juan", "Yo llamo Juan", "Me llamo Juan", "Mi llamo Juan"],
        answer: 3,
        dica: "üá™üá∏ 'Me llamo' √© a forma correta de se apresentar. (Eu me chamo)"
      }
    ];

    let current = 0;
    let score = 0;
    let answered = false;
    let userAnswers = [];
    let timer;
    let timeLeft = 80;

    function startTimer() {
      clearInterval(timer);
      timeLeft = 80;
      const timerEl = document.getElementById("timer");
      if (timerEl) timerEl.textContent = "‚è≥ Tempo: " + timeLeft + "s";
      timer = setInterval(() => {
        timeLeft--;
        const timerEl = document.getElementById("timer");
        if (timerEl) timerEl.textContent = "‚è≥ Tempo: " + timeLeft + "s";
        if (timeLeft <= 0) {
          clearInterval(timer);
          userAnswers.push(0);
          nextQuestion();
        }
      }, 1000);
    }

    function formatBoldQuotes(text) {
      return text.replace(/"(.*?)"/g, '<b>"$1"</b>');
    }

    function showQuestion() {
      answered = false;
      const q = questions[current];
      const formattedQuestion = formatBoldQuotes(q.question);
      let html = `<div id="timer">‚è≥ Tempo: 80s</div>`;
      html += `<div class="question">${current+1}. ${formattedQuestion}</div>`;
      if (q.dica) {
        html += `<div class="dica">üí° ${q.dica}</div>`;
      }
      html += `<div class="options">`;
      q.options.forEach((opt, i) => {
        html += `<button onclick="clickOption(${i+1})">${opt}</button>`;
      });
      html += '</div>';
      document.getElementById('quiz').innerHTML = html;
      startTimer();
    }

    function clickOption(selected) {
      const loading = document.getElementById('loading');
      loading.style.display = 'flex';

      setTimeout(() => {
        loading.style.display = 'none';
        checkAnswer(selected);
      }, 800); // Simula carregamento
    }

    function checkAnswer(selected) {
      if(answered) return;
      answered = true;
      clearInterval(timer);

      const correct = questions[current].answer;
      const buttons = document.querySelectorAll('.options button');
      buttons.forEach((b, i) => {
        if (i+1 == correct) b.classList.add('correct');
        else if (i+1 == selected) b.classList.add('incorrect');
        b.disabled = true;
      });

      userAnswers.push(selected);
      if (selected == correct) {
        score++;
        confetti({ particleCount: 100, spread: 70, origin: { y: 0.6 }, gravity: 0.3, ticks: 300 });
      }

      setTimeout(nextQuestion, 800);
    }

    function nextQuestion() {
      current++;
      if(current < questions.length) showQuestion();
      else showFinalScreen();
    }

    // ========== TELA FINAL SIMPLIFICADA ==========
    function showFinalScreen() {
      // Efeito visual baseado na pontua√ß√£o
      if (score >= 7) {
        confetti({ particleCount: 200, spread: 120, origin: { y: 0.5 } });
      } else if (score >= 5) {
        confetti({ particleCount: 100, spread: 80, origin: { y: 0.5 } });
      }

      // Tela com a nota e o bot√£o VER RESULTADOS que redireciona
      let html = `
        <div class="result-banner">
          <h2 style="font-size: 2.5em; margin-bottom: 10px;">üìã QUIZ CONCLU√çDO!</h2>
          <div class="nota-final">${score}/${questions.length}</div>
          <p style="font-size: 1.3em; margin-bottom: 30px;">Sua pontua√ß√£o final em espanhol</p>
          
          <button class="action-btn" onclick="redirectToResultados()">üîó VER RESULTADOS</button>
          <p style="margin-top: 20px; font-size: 1em; color: #666;">Clique para ver explica√ß√µes detalhadas</p>
        </div>
      `;

      // Bot√£o FAZER OUTRA ETAPA (Shopee)
      html += `<div style="text-align:center; margin: 20px 0;">
        <button class="action-btn secondary" onclick="redirectToShopee()">üöÄ FAZER OUTRA ETAPA</button>
      </div>`;

      // Campo de nome e bot√£o enviar (para salvar resultados)
      html += `<div style="text-align:center; margin-top: 30px; border-top: 2px dashed #aaa; padding-top: 20px;">
        <input type="text" id="participantName" placeholder="Digite seu nome para salvar" style="width:80%; padding:12px; font-size:1.1em;"><br>
        <button class="next-btn" onclick="sendResults()" style="margin-top:15px;">üíæ ENVIAR RESPOSTAS</button>
      </div>`;

      document.getElementById('quiz').innerHTML = html;
    }

    // Redireciona para o site de resultados
    function redirectToResultados() {
      window.open(resultadosLink, '_blank');
    }

    // Redireciona para a Shopee (nova etapa)
    function redirectToShopee() {
      window.open(shopeeLink, '_blank');
    }

    // Fun√ß√£o para enviar os resultados (simula√ß√£o - adapte para sua planilha)
    function sendResults() {
      const participantName = document.getElementById('participantName').value.trim();
      if(!participantName) {
        alert("Digite seu nome antes de enviar.");
        return;
      }
      
      // Prepara os dados
      const resultado = {
        nome: participantName,
        pontuacao: score,
        total: questions.length,
        data: new Date().toLocaleString('pt-BR')
      };
      
      // Mostra loading
      document.getElementById('loading').style.display = 'flex';
      
      // Simula envio (substitua por google.script.run se tiver backend)
      setTimeout(() => {
        document.getElementById('loading').style.display = 'none';
        alert(`Obrigado ${participantName}! Sua pontua√ß√£o ${score}/${questions.length} foi registrada.`);
      }, 1000);
      
      console.log("Resultado:", resultado);
    }

    // Inicia o quiz
    showQuestion();
  </script>
</body>
</html>